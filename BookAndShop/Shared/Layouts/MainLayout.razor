@using BookAndShop.LayoutServices
@inherits LayoutComponentBase
@inject NavigationManager navigationManager

@*<PageTitle>BookAndShop</PageTitle>
*@

	
	@if(CountService.Count<1)
	{
		<!-- Intro -->
		<div id="intro">
			<h1>
				Book&Shop
			</h1>
			<p>
				Самый крупный онлайн-магазин книг!
			</p>
			<ul class="actions">
				<li><a @onclick="StartClick" href="/" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
			</ul>
		</div>

		<!-- Header -->
@*		 <header id="header" style="opacity:0">
			<a class="logo">Book&Shop</a>
		</header>*@
	}
	else{
		@if(CountService.Count==1)
		{
			<div id="intro" style="animation-name: TitleCollapse; animation-duration: 1.5s; animation-fill-mode:forwards;">
				<h1>
					Book&Shop
				</h1>
				<p>
					Самый крупный онлайн-магазин книг!
				</p>
				<ul class="actions">
					<li><a @onclick="StartClick" href="/" class="button icon solid solo fa-arrow-down scrolly">Continue</a></li>
				</ul>
			</div> 
			<!-- Header -->
			 <header id="header" style="opacity:0">
				<a class="logo">Book&Shop</a>
			</header>
		 
		}
		else{
			<!-- Header -->
			<header id="header" style="opacity:0; animation-name: HeaderVisible; animation-duration: 3s; animation-fill-mode:forwards;">
				<a class="logo">Book&Shop</a>
			</header>
		}
	}
       

		<!-- Nav -->
		<nav id="nav">
			<ul class="links">
				@if(Url == "/")
				{
					<li class="active"><a @onclick="@(x => urlChanged("/"))">This is Massively</a></li>
				}
				else
				{
					<li><a @onclick="@(x => urlChanged("/"))">This is Massively</a></li>
				}
				@if(Url == "/generic")
				{
					<li class="active"><a @onclick="@(x => urlChanged("/generic"))">Generic Page</a></li>
				}
				else
				{
					<li><a @onclick="@(x => urlChanged("/generic"))">Generic Page</a></li>
				}
				
				<li><a @onclick="@(x => urlChanged("/"))">Elements Reference</a></li>
			</ul>
			<ul class="icons" style="margin-top:8px">

				<li><a class="label" style="border-bottom:0px; margin-right:15px">
					<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
						<path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
						<path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
					</svg>
				</a></li>
				<li><a class="label" style="border-bottom:0px">
					<svg xmlns="http://www.w3.org/2000/svg" width="34" height="34" fill="currentColor" class="bi bi-basket2-fill" viewBox="0 0 16 16">
						<path d="M5.929 1.757a.5.5 0 1 0-.858-.514L2.217 6H.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h.623l1.844 6.456A.75.75 0 0 0 3.69 15h8.622a.75.75 0 0 0 .722-.544L14.877 8h.623a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5h-1.717L10.93 1.243a.5.5 0 1 0-.858.514L12.617 6H3.383L5.93 1.757zM4 10a1 1 0 0 1 2 0v2a1 1 0 1 1-2 0v-2zm3 0a1 1 0 0 1 2 0v2a1 1 0 1 1-2 0v-2zm4-1a1 1 0 0 1 1 1v2a1 1 0 1 1-2 0v-2a1 1 0 0 1 1-1z"/>
					</svg>
				</a></li>
			</ul>
		</nav>
		<div id="main">			
		@Body
		</div>
			<!-- Footer -->
			<footer id="footer">
				@*<section>
					<form method="post" action="#">
						<div class="fields">
							<div class="field">
								<label for="name">Name</label>
								<input type="text" name="name" id="name" />
							</div>
							<div class="field">
								<label for="email">Email</label>
								<input type="text" name="email" id="email" />
							</div>
							<div class="field">
								<label for="message">Message</label>
								<textarea name="message" id="message" rows="3"></textarea>
							</div>
						</div>
						<ul class="actions">
							<li><input type="submit" value="Send Message" /></li>
						</ul>
					</form>
				</section>*@
				<section class="split contact">
					<section class="alt">
						<h3>Address</h3>
						<p>1234 Somewhere Road #87257<br />
						Nashville, TN 00000-0000</p>
					</section>
					<section>
						<h3>Phone</h3>
						<p><a href="#">(000) 000-0000</a></p>
					</section>
					<section>
						<h3>Email</h3>
						<p><a href="#">info@untitled.tld</a></p>
					</section>
					<section>
						<h3>Social</h3>
						<ul class="icons alt">
							<li><a href="#" class="icon brands alt fa-twitter"><span class="label">Twitter</span></a></li>
							<li><a href="#" class="icon brands alt fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands alt fa-instagram"><span class="label">Instagram</span></a></li>
							<li><a href="#" class="icon brands alt fa-github"><span class="label">GitHub</span></a></li>
						</ul>
					</section>
				</section>
			</footer>

		<!-- Copyright -->
@*			<div id="copyright">
				<ul><li>&copy; Untitled</li><li>Design: <a href="https://html5up.net">HTML5 UP</a></li></ul>
			</div>*@



@code{
	string Url { get; set; } = "/";
	void urlChanged(string url)
	{
		Url = url;
		navigationManager.NavigateTo(url);
	}
	protected override void OnInitialized()
	{
		CountService.Count = 0;
	}

	private async void StartClick()
	{
		CountService.Count++;
		await Task.Run(() => IncCount());
		//navigationManager.NavigateTo(Url);
	}

	void IncCount()
	{
		Thread.Sleep(2000);
		CountService.Count++;
		InvokeAsync(() => StateHasChanged());
	}
}

